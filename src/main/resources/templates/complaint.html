<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Complaint Viewer</title>
</head>
<body>
<h2>Complaint ID: <span th:text="${complaint.complaintId}"></span></h2>

<p th:if="${error != null}" th:text="${error}" style="color: red;"></p>

<!-- Displaying Complaint Details -->
<p><strong>Date Received:</strong> <span th:text="${complaint.dateReceivedStr}">[No Date]</span></p>
<p><strong>Product:</strong> <span th:text="${complaint.product}">[No Product]</span></p>
<p><strong>Sub-product:</strong> <span th:text="${complaint.subProduct}">[No Sub-product]</span></p>
<p><strong>Issue:</strong> <span th:text="${complaint.issue}">[No Issue]</span></p>
<p><strong>Sub-issue:</strong> <span th:text="${complaint.subIssue}">[No Sub-issue]</span></p>
<p><strong>Narrative:</strong></p>
<p th:text="${complaint.narrative}">[No Narrative]</p>
<p><strong>Company Public Response:</strong> <span th:text="${complaint.publicResponse}">[No Response]</span></p>
<p><strong>Company:</strong> <span th:text="${complaint.company}">[No Company]</span></p>
<p><strong>State:</strong> <span th:text="${complaint.state}">[No State]</span></p>
<p><strong>ZIP Code:</strong> <span th:text="${complaint.zipCode}">[No ZIP]</span></p>


<hr/>

<form method="get" action="/complaint">
    <label for="indexInput">Jump to complaint #:</label>
    <input type="text" name="index" id="indexInput" />
    <button type="submit">Go</button>
</form>

<p th:if="${error != null}" th:text="${error}" style="color: red;"></p>


<hr/>

<h3>Top 3 Most Similar Complaints</h3>
<ul>
    <li th:each="similar : ${similarComplaints}">
        <p><strong>ID:</strong> <span th:text="${similar.complaintId}"></span></p>
        <p><strong>Company:</strong> <span th:text="${similar.company}"></span></p>
        <p th:text="${similar.narrative}"></p>
    </li>
</ul>

<hr/>
<a th:href="@{|/complaint?index=${prevIndex}|}">⬅ Previous</a> |
<a th:href="@{|/complaint?index=${nextIndex}|}">Next ➡</a>

</body>
</html>
